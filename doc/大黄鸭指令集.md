# 汇编指令格式
### 8b指令  
1. 并行指令  
CMD,RG;CMD,RG  
2. 单8b指令，需填充nop  
CMD,RG;nop  
### 16b指令
1. 双寄存器指令  
CMD,RG1,RG2  
2. 寄存器+立即数指令
CMD,RG,$h
### 指令集结构
8/16位指令    
对指令空间同时读或写、对同一个寄存器写指令互斥。    

#### 8位指令
##### [7:4]指令[3:0]寄存器1  
1. 加载  
- 从[DK]指向的地址读出一个数，存入[寄存器1]
2. 存储  
- 把[寄存器1]的值写入[DK]指向的地址
3. 逻辑非  
- [寄存器1]的值取反
4. 寄存器+1   
- [寄存器1]的值+1
5. 寄存器高低字节交换   
- [寄存器1]的高低字节交换

#### 16位指令
具体见16指令表.xlsx  
##### [15:12]指令[11:8]寄存器1[7:0]立即数  
1. 加法  
- DK=DK+[寄存器1]+[立即数]  
2. 减法  
- DK=DK-[寄存器1]-[立即数]  
3. 非0跳转  
- DK!=0，跳转到[寄存器1]+[立即数]  
4. 无条件跳转  
- 跳转到[寄存器1]+[立即数]  
5. 逻辑左移  
- DK逻辑左移[寄存器1]+[立即数]，低位补0  
6. 逻辑右移  
- DK逻辑右移[寄存器1]+[立即数]，高位补0  
7. 循环左移  
- DK循环左/右移[寄存器1]+[立即数]  
##### [15:12]指令[11:8]寄存器1[7:4]寄存器2[3:0]X  
1. 寄存器转移  
- [寄存器1]的值写入[寄存器2]  
2. 比较  
- [寄存器1]>[寄存器2]，DK写入1  
3. 逻辑与  
- [寄存器1]与[寄存器2]与运算，结果写入DK  
4. 逻辑或  
- [寄存器1]与[寄存器2]或运算，结果写入DK  

### 寄存器结构
具体见16寄存器组.xlsx  
|编号|标识符|功能|
|----|----|----|
|0|ZE|零寄存器|
|1|DK|运算寄存器|
|2-C|R0-RC|通用寄存器|
|F|PC|程序计数器|


### 处理器实现
16位处理器单元，16位地址线，16位数据位宽，16个寄存器。  
指令、数据空间必须且只能2字节对齐。  
哈佛结构，指令地址与数据地址分离。  
IO寄存器映射实现。  
双发射，两条8位指令可并行执行。  
2级流水线，发生跳转则使用空指令填充流水线。